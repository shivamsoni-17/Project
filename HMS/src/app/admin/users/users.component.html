<section class="page">
  <h2>Users</h2>
  <div class="filters">
    <input placeholder="Search by name/email/username" [(ngModel)]="filter">
    <button (click)="load()">Search</button>
  </div>
  <div class="msg success" *ngIf="successMessage">{{ successMessage }}</div>
  <div class="msg error" *ngIf="message">{{ message }}</div>
  <table class="table" *ngIf="users.length">
    <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Mobile</th><th>Username</th><th>Role</th><th>Actions</th><th>Delete</th></tr></thead>
    <tbody>
      <tr *ngFor="let u of users">
        <td>{{ u.id }}</td>
        <td>{{ u.fullName }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.mobile }}</td>
        <td>{{ u.username }}</td>
        <td><span class="role-badge" [ngClass]="'role-' + u.role.toLowerCase()">{{ u.role }}</span></td>
        <td class="actions">
          <button (click)="setRole(u, 'customer')" [disabled]="u.role === 'customer'">Customer</button>
          <button (click)="setRole(u, 'staff')" [disabled]="u.role === 'staff'">Staff</button>
          <button (click)="setRole(u, 'admin')" [disabled]="u.role === 'admin'">Admin</button>
        </td>
        <td class="delete-action" *ngIf="u.role !== 'admin'">
          <button class="delete-btn" (click)="deleteUser(u)" title="Delete user">ğŸ—‘ï¸</button>
        </td>
        <td class="delete-action" *ngIf="u.role === 'admin'">
          <span class="disabled-text">-</span>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="!users.length && !message" class="muted">No users found.</div>
</section>
