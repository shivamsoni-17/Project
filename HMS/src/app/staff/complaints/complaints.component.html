<section class="staff-page">
  <div class="staff-header">
    <div class="title">
      <h2>Staff Home</h2>
      <p>Manage customer complaints and update their status.</p>
    </div>
    <button class="primary" (click)="load()">Refresh</button>
  </div>

  <div class="page">
    <h2>Complaints</h2>
    <div class="msg" *ngIf="message">{{ message }}</div>

    <table class="table" *ngIf="complaints.length">
      <thead>
      <tr>
        <th>ID</th><th>User</th><th>Room</th><th>Category</th><th>Status</th><th>Created</th><th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let c of complaints">
        <td>{{ c.id }}</td>
        <td>{{ c.userId }}</td>
        <td>{{ c.roomNo || '-' }}</td>
        <td>{{ c.category }}</td>
        <td><span class="chip">{{ c.status }}</span></td>
        <td>{{ c.createdAt }}</td>
        <td class="actions">
          <button class="primary" (click)="setStatus(c, 'IN PROGRESS')">In Progress</button>
          <button class="primary" (click)="setStatus(c, 'RESOLVED')">Resolve</button>
          <button class="danger" (click)="setStatus(c, 'CLOSED')">Close</button>
        </td>
      </tr>
      </tbody>
    </table>

    <div *ngIf="!complaints.length && !message" class="muted">No complaints found.</div>
  </div>
</section>
